<html>
<head>
</head>
<body>
  <p>Redirecting...</p>
  <script type="text/javascript" src="/js/js.cookie.js"></script>
  <script type="text/javascript" src="/js/amazon-cognito-auth.min.js"></script>
  <script>
    let auth = new AmazonCognitoIdentity.CognitoAuth({
      ClientId : '1opllluc6ruh50h0qc74395k1i',
      AppWebDomain : 'auth.thankshell.com',
      TokenScopesArray : ['profile', 'email', 'openid', 'aws.cognito.signin.user.admin', 'phone'],
      RedirectUriSignIn : 'https://develop.thankshell.com/login/callback',
      RedirectUriSignOut : 'https://develop.thankshell.com/login/logout',
    });

    auth.userhandler = {
      onSuccess: function(result) {
        console.log(result);

        let defaultRedirectPage = "/groups/sla";
        let redirectPage = Cookies.get('auth_previous_page');
//        location.href = redirectPage ? redirectPage : defaultRedirectPage;
    	},
    	onFailure: function(err) {
    	  console.log("Error!");
    	  console.log(err);
    	}
    };
    auth.useCodeGrantFlow();

    auth.parseCognitoWebResponse(window.location.href);
  </script>
</body>
</html>
