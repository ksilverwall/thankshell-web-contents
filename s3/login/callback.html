<html>
<head>
</head>
<body>
  <p>Redirecting...</p>
  <script type="text/javascript" src="/js/js.cookie.js"></script>
  <script type="text/javascript" src="/js/amazon-cognito-auth.min.js"></script>
  <script type="text/javascript" src="/js/auth.js"></script>
  <script>
    let controller = new SessionController();
    let auth = controller.auth;

    auth.userhandler = {
      onSuccess: function(result) {
        console.log(result);

        let defaultRedirectPage = "/groups/sla";
        let redirectPage = Cookies.get('auth_previous_page');
        location.href = redirectPage ? redirectPage : defaultRedirectPage;
      },
      onFailure: function(err) {
        console.log("Error!");
        console.log(err);
      }
    };
    auth.useCodeGrantFlow();

    auth.parseCognitoWebResponse(window.location.href);
  </script>
</body>
</html>
